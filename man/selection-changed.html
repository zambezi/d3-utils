<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        
        <title>changed | d3-utils</title>
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        
  
    
    <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
    
  
    
    <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
    
  
    
    <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
    
  
    
    <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-zambezi-docs/styles.css">
    
  
  

        
  
  
  <link rel="next" href="../man/selection-notify-remove.html" />
  
  
  <link rel="prev" href="../man/html-simple-keyboard-input-behaviour.html" />
  

        
    </head>
    <body>
        
        
<div class="book" data-level="7.1" data-chapter-title="changed" data-filepath="man/selection-changed.md" data-basepath=".." data-revision="Tue Jan 12 2016 02:42:25 GMT+0000 (GMT Standard Time)">
  

<nav class="book-summary" role="navigation">
  <ul class="summary">
    
    
    
    

    

    
  
    <li class="chapter chapter-root"
        data-level="0"
        
          data-path="index.html"
        >
      
        
          <a class="chapter-title" data-title="Introduction" href="../index.html">
        
            Introduction
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root"
        data-level="1"
        
          data-path="man/append-from-template.html"
        >
      
        
          <a class="chapter-title" data-title="append-from-template" href="../man/append-from-template.html">
        
            append-from-template
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root"
        data-level="2"
        
          data-path="man/click-outside.html"
        >
      
        
          <a class="chapter-title" data-title="click-outside" href="../man/click-outside.html">
        
            click-outside
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root chapter-list"
        data-level="3"
        >
      
        <span class="chapter-title" data-title="Events">Events</span>
      
      
        <ul class="articles">
          
  
    <li class="chapter"
        data-level="3.1"
        
          data-path="man/events-dispatch.html"
        >
      
        
          <a class="chapter-title" data-title="dispatch" href="../man/events-dispatch.html">
        
            dispatch
          </a>
      
      
    </li>
  
    <li class="chapter"
        data-level="3.2"
        
          data-path="man/events-live.html"
        >
      
        
          <a class="chapter-title" data-title="live" href="../man/events-live.html">
        
            live
          </a>
      
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter chapter-root chapter-list"
        data-level="4"
        >
      
        <span class="chapter-title" data-title="Formatters">Formatters</span>
      
      
        <ul class="articles">
          
  
    <li class="chapter"
        data-level="4.1"
        
          data-path="man/formatters-empty-if-undefined.html"
        >
      
        
          <a class="chapter-title" data-title="empty-if-undefined" href="../man/formatters-empty-if-undefined.html">
        
            empty-if-undefined
          </a>
      
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter chapter-root"
        data-level="5"
        
          data-path="man/green-thread-trampoline.html"
        >
      
        
          <a class="chapter-title" data-title="green-thread-trampoline" href="../man/green-thread-trampoline.html">
        
            green-thread-trampoline
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root chapter-list"
        data-level="6"
        >
      
        <span class="chapter-title" data-title="HTML">HTML</span>
      
      
        <ul class="articles">
          
  
    <li class="chapter"
        data-level="6.1"
        
          data-path="man/html-clamp.html"
        >
      
        
          <a class="chapter-title" data-title="clamp" href="../man/html-clamp.html">
        
            clamp
          </a>
      
      
    </li>
  
    <li class="chapter"
        data-level="6.2"
        
          data-path="man/html-paragraphs.html"
        >
      
        
          <a class="chapter-title" data-title="paragraphs" href="../man/html-paragraphs.html">
        
            paragraphs
          </a>
      
      
    </li>
  
    <li class="chapter"
        data-level="6.3"
        
          data-path="man/html-safe-update-input-value.html"
        >
      
        
          <a class="chapter-title" data-title="safe-update-input-value" href="../man/html-safe-update-input-value.html">
        
            safe-update-input-value
          </a>
      
      
    </li>
  
    <li class="chapter"
        data-level="6.4"
        
          data-path="man/html-simple-keyboard-input-behaviour.html"
        >
      
        
          <a class="chapter-title" data-title="simple-keyboard-input-behaviour" href="../man/html-simple-keyboard-input-behaviour.html">
        
            simple-keyboard-input-behaviour
          </a>
      
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter chapter-root chapter-list"
        data-level="7"
        >
      
        <span class="chapter-title" data-title="Selection">Selection</span>
      
      
        <ul class="articles">
          
  
    <li class="chapter active"
        data-level="7.1"
        
          data-path="man/selection-changed.html"
        >
      
        
          <a class="chapter-title" data-title="changed" href="../man/selection-changed.html">
        
            changed
          </a>
      
      
    </li>
  
    <li class="chapter"
        data-level="7.2"
        
          data-path="man/selection-notify-remove.html"
        >
      
        
          <a class="chapter-title" data-title="notify-remove" href="../man/selection-notify-remove.html">
        
            notify-remove
          </a>
      
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter chapter-root"
        data-level="8"
        
          data-path="man/set-content-if-empty.html"
        >
      
        
          <a class="chapter-title" data-title="set-content-if-empty" href="../man/set-content-if-empty.html">
        
            set-content-if-empty
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root"
        data-level="9"
        
          data-path="man/set-content-if-missing.html"
        >
      
        
          <a class="chapter-title" data-title="set-content-if-missing" href="../man/set-content-if-missing.html">
        
            set-content-if-missing
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root chapter-list"
        data-level="10"
        >
      
        <span class="chapter-title" data-title="SVG">SVG</span>
      
      
        <ul class="articles">
          
  
    <li class="chapter"
        data-level="10.1"
        
          data-path="man/svg-radial-tween.html"
        >
      
        
          <a class="chapter-title" data-title="radial-tween" href="../man/svg-radial-tween.html">
        
            radial-tween
          </a>
      
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter chapter-root"
        data-level="11"
        
          data-path="man/text-if-changed.html"
        >
      
        
          <a class="chapter-title" data-title="text-if-changed" href="../man/text-if-changed.html">
        
            text-if-changed
          </a>
      
      
    </li>
  
    <li class="chapter chapter-root chapter-list"
        data-level="12"
        >
      
        <span class="chapter-title" data-title="Transitions">Transitions</span>
      
      
        <ul class="articles">
          
  
    <li class="chapter"
        data-level="12.1"
        
          data-path="man/transitions-per-index-delay.html"
        >
      
        
          <a class="chapter-title" data-title="per-index-delay" href="../man/transitions-per-index-delay.html">
        
            per-index-delay
          </a>
      
      
    </li>
  

        </ul>
      
    </li>
  

  </ul>
</nav>

  <div class="book-body">
    

<header class="book-header stack" role="navigation">
  
  <a href="" rel="summary"
    title="Table of Contents" aria-label="Table of Contents"
    class="summary-toggle panel"
    onclick="return false">
    <span class="button-inner">
      <object type="image/svg+xml" data="../gitbook/plugins/gitbook-plugin-zambezi-docs/images/icon-summary.svg">
        Table of Contents
      </object>
    </span>
  </a>

  
  <div class="book-header-tools panel">
    
      
  <a href="https://github.com/stadema/d3-utils/edit/master/man/selection-changed.md" rel="edit"
    title="Edit this page!" aria-label="Edit this page!"
    
    >
    <span class="button-inner">
      <object type="image/svg+xml" data="../gitbook/plugins/gitbook-plugin-zambezi-docs/images/icon-edit.svg">
        Edit this page!
      </object>
    </span>
  </a>

    

    
  </div>
</header>

    <div class="body-inner">
      <main class="page-wrapper" tabindex="-1" role="main">
        <article class="page-inner">
        
        
        
          <section class="normal" id="section-">
          
            <h2 id="selection-changed-d3utilsselectionchanged">selection changed <code>d3-utils/selection/changed</code></h2>
<p>This selection component allows you to select elements only for which the data has changed.
This is useful to prevent unnecessary redraws of elements.</p>
<p>To use, create a <code>changed</code> function and configure its <code>key</code> argument.
The <code>key</code> argument is a function that takes the data object and returns a string representation of it.
This key will be stored against the node, so the next time you run the selection on it it will generate a new one and compare it to the stored one---if the key string is the same, the element will be skipped from the selection.</p>
<pre><code>var elementChanged = changed().key(id)

d3.select(&quot;ul&quot;)
    .selectAll(&quot;li&quot;)
    .select(elementChanged)
    .called(expensiveUpdate)

function id(d) {
  return d.id
}
</code></pre><p>In the previous example, all we care about is the id of the data element.
If id is the same as the last time, don&apos;t bother calling <code>expensiveUpdate</code> function on it.</p>
<p>Let&apos;s say you have a component that edits your object---you can change a <code>.notes</code> property on it.
And when you want to refresh your lists to reflect that new property.
You can make a <code>key</code> function that will take into account that property so that elements for which the <code>.notes</code> field have changed will make it into the new selection:</p>
<pre><code>var elementChanged = changed().key(idAndNotes)

d3.select(&quot;ul&quot;)
    .selectAll(&quot;li&quot;)
    .select(elementChanged)
    .called(expensiveUpdate)

function idAndNotes(d) {
  return d.id + &quot;:::&quot; + d.notes
}
</code></pre><p>Note that you can apply the &apos;changed&apos; selection even if no key is defined.
In that case it will not be able to detect when an item has not changed so it will return the full selection every time.</p>

          
          </section>
        
        
        </article>
      </main>
    </div>

    

    
      
  <a href="../man/html-simple-keyboard-input-behaviour.html" rel="prev"
    title="Previous page: simple-keyboard-input-behaviour" aria-label="Previous page: simple-keyboard-input-behaviour"
    class="navigation navigation-prev"
    >
    <span class="button-inner">
      <object type="image/svg+xml" data="../gitbook/plugins/gitbook-plugin-zambezi-docs/images/icon-prev.svg">
        Previous page: simple-keyboard-input-behaviour
      </object>
    </span>
  </a>

    
    
      
  <a href="../man/selection-notify-remove.html" rel="next"
    title="Next page: notify-remove" aria-label="Next page: notify-remove"
    class="navigation navigation-next"
    >
    <span class="button-inner">
      <object type="image/svg+xml" data="../gitbook/plugins/gitbook-plugin-zambezi-docs/images/icon-next.svg">
        Next page: notify-remove
      </object>
    </span>
  </a>

    
    

<footer class="book-footer panel" role="contentinfo">
  
  <a href="" rel=""
    title="Powered by Zambezi" aria-label="Powered by Zambezi"
    class="powered-by no-t"
    onclick="return false">
    <span class="button-inner">
      <object type="image/svg+xml" data="../gitbook/plugins/gitbook-plugin-zambezi-docs/images/icon-powered-by.svg">
        Powered by Zambezi
      </object>
    </span>
  </a>

</footer>

  </div>
</div>

        

  
  <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
  

  
  <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
  

  
  <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
  

  
  <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
  

  
  <script src="../gitbook/plugins/gitbook-plugin-zambezi-docs/book.js"></script>
  


        
    </body>
    
</html>
